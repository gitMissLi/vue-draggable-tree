{"version":3,"sources":["webpack:///static/js/app.c8aa288cf90aeba7acd9.js","webpack:///./src/components/Index.vue","webpack:///src/components/Index.vue","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/tree/Tree.js","webpack:///./src/tree/index.js","webpack:///./src/tree/utils.js","webpack:///./src/tree/TreeNode.js","webpack:///./src/tree/defaultTemplate.js","webpack:///./src/components/Index.vue?0ce6","webpack:///./src/App.vue?8deb","webpack:///src/App.vue"],"names":["webpackJsonp","42Hy","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Index_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Index_vue___default","n","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_41135bf0_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Index_vue__","normalizeComponent","__vue_styles__","Component","a","DK6z","exports","_interopRequireDefault","obj","__esModule","default","_toConsumableArray2","_toConsumableArray3","_tree","_tree2","EXAMPLE_DATA","key","title","children","name","components","Tree","data","gData","methods","onDrop","info","dropKey","node","eventKey","dragKey","dragNode","dropPos","pos","split","dropPosition","Number","length","loop","callback","forEach","item","index","arr","concat","this","dragObj","splice","dropToGap","ar","i","push","M93x","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_380a485a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","NHnr","_vue","_vue2","_App","_App2","config","productionTip","el","template","App","YwDL","foo","_TreeNode","_TreeNode2","_defaultTemplate","_defaultTemplate2","_utils","component","props","type","Array","autoExpandParent","Boolean","draggable","onDragEnd","Function","onDragEnter","onDragLeave","onDragOver","onDragStart","onExpand","dropNodeKey","dragNodesKeys","dragOverNodeKey","expandedKeys","renderTreeNode","child","h","$createElement","_child$data","vChildren","rckey","level","source","dragOverGapTop","dragOverGapBottom","dragOver","expanded","indexOf","attrs","root","getDragNodesKeys","treeNode","treeNodePosArr","traverseTreeNodes","$children","childPosArr","isInclude","dragStart","e","event","dragEnter","calcDropPosition","dragLeave","drop","console","error","posArr","res","dragEnd","selectHandle","$refs","offsetTop","getOffset","top","offsetHeight","pageY","expand","render","_this","class","role","unselectable","map","cWM3","_Tree","_Tree2","hgXd","treeNodes","arguments","undefined","traverse","subTreeNodes","parentsChildrenPos","parentPos","newSubTreeNodes","filter","isTreeNode","childrenPos","smallArray","bigArray","every","ele","getClientRects","left","rect","getBoundingClientRect","width","height","doc","ownerDocument","win","defaultView","docElem","documentElement","pageYOffset","clientTop","pageXOffset","clientLeft","newLevel","hwOU","_typeof2","_typeof3","_classnames","_classnames2","TreeNode","prefixCls","String","dataLoading","dragNodeHighlight","computed","handleSelect","renderChildren","newchildren","vnode","onSelect","stopPropagation","dataTransfer","setData","preventDefault","_this2","callbackPromise","setLoading","then","switcher","state","on","click","_this3","dragOverCls","disabled","content","ref","style","dragstart","dragenter","dragover","dragend","ioV9","kvWO","_vm","_h","_c","_self","staticClass","staticRenderFns","esExports","lf0G","id","rUkx","upaz","w0q8","xJD8","_Index","_Index2","Index"],"mappings":"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","file":"static/js/app.c8aa288cf90aeba7acd9.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"42Hy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Index_vue__ = __webpack_require__(\"DK6z\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Index_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Index_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_41135bf0_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Index_vue__ = __webpack_require__(\"kvWO\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"w0q8\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-41135bf0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Index_vue___default.a,\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_41135bf0_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Index_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"DK6z\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _toConsumableArray2 = __webpack_require__(\"Gu7T\");\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _tree = __webpack_require__(\"cWM3\");\n\nvar _tree2 = _interopRequireDefault(_tree);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EXAMPLE_DATA = [{\n    key: '0',\n    title: '女装',\n    children: [{\n        key: '0-1',\n        title: '风衣'\n    }, {\n        key: '0-2',\n        title: '外套'\n    }]\n}, {\n    key: '1',\n    title: '男装'\n}, {\n    key: '2',\n    title: '图书',\n    children: [{\n        key: '2-0',\n        title: '小说',\n        children: [{\n            key: '2-0-0',\n            title: '九州牧云录'\n        }, {\n            key: '2-0-1',\n            title: '天空的城'\n        }, {\n            key: '2-0-2',\n            title: '三体'\n        }]\n    }, {\n        key: '2-1',\n        title: '经管',\n        children: [{\n            key: '2-1-0',\n            title: '创京东'\n        }]\n    }, {\n        key: '2-2',\n        title: '科技',\n        children: [{\n            key: '2-2-0',\n            title: 'JavaScript权威指南'\n        }, {\n            key: '2-2-1',\n            title: 'JavaScript高级程序设计'\n        }]\n    }]\n}]; //\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexports.default = {\n    name: 'vue-draggable-tree-demo',\n    components: {\n        Tree: _tree2.default\n    },\n    data: function data() {\n        return {\n            gData: EXAMPLE_DATA\n        };\n    },\n\n    methods: {\n        /**\n         * 结束拖拽后此时的信息，包括目标节点、拖拽节点、位置\n         */\n        onDrop: function onDrop(info) {\n            // 目标节点\n            var dropKey = info.node.eventKey;\n            // 正在拖拽的节点\n            var dragKey = info.dragNode.eventKey;\n            var dropPos = info.node.pos.split('-');\n            var dropPosition = info.dropPosition - Number(dropPos[dropPos.length - 1]);\n            // const dragNodesKeys = info.dragNodesKeys;\n            /**\n             * 遍历 data，节点对应的对象\n             * @param {} data\n             * @param {} key\n             * @param {Function} callback\n             */\n            var loop = function loop(data, key, callback) {\n                data.forEach(function (item, index, arr) {\n                    if (item.key === key) {\n                        return callback(item, index, arr);\n                    }\n                    if (item.children) {\n                        return loop(item.children, key, callback);\n                    }\n                    return false;\n                });\n            };\n            // 浅拷贝\n            var data = [].concat((0, _toConsumableArray3.default)(this.gData));\n            var dragObj = void 0;\n            loop(data, dragKey, function (item, index, arr) {\n                // 找到后，删掉该节点\n                arr.splice(index, 1);\n                dragObj = item;\n            });\n            // 然后处理应该放到哪里\n            if (info.dropToGap) {\n                // 如果是在两个节点之间\n                var ar = void 0;\n                var i = void 0;\n                // 寻找放置的那个节点对应的数组，保存为 ar\n                loop(data, dropKey, function (item, index, arr) {\n                    ar = arr;\n                    i = index;\n                });\n                // 如果是放到下边缘\n                if (dropPosition === 1) {\n                    ar.splice(i + 1, 0, dragObj);\n                } else {\n                    ar.splice(i, 0, dragObj);\n                }\n            } else {\n                // 成为子节点\n                loop(data, dropKey, function (item) {\n                    /* eslint-disable */\n                    item.children = item.children || [];\n                    // where to insert 示例添加到尾部，可以是随意位置\n                    item.children.push(dragObj);\n                });\n            }\n            // 改变数据，让 vue 自己去更新视图\n            this.gData = data;\n        }\n    }\n};\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"xJD8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_380a485a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"lf0G\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"upaz\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default.a,\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_380a485a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _App = __webpack_require__(\"M93x\");\n\nvar _App2 = _interopRequireDefault(_App);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n_vue2.default.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew _vue2.default({\n  el: '#app',\n  template: '<App/>',\n  components: { App: _App2.default }\n});\n\n/***/ }),\n\n/***/ \"YwDL\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _toConsumableArray2 = __webpack_require__(\"Gu7T\");\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _TreeNode = __webpack_require__(\"hwOU\");\n\nvar _TreeNode2 = _interopRequireDefault(_TreeNode);\n\nvar _defaultTemplate = __webpack_require__(\"ioV9\");\n\nvar _defaultTemplate2 = _interopRequireDefault(_defaultTemplate);\n\nvar _utils = __webpack_require__(\"hgXd\");\n\n__webpack_require__(\"rUkx\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction foo() {}\n\nexports.default = _vue2.default.component('Tree', {\n    props: {\n        // 要渲染的数据\n        data: {\n            type: Array\n        },\n        // 是否自动展开节点\n        autoExpandParent: {\n            type: Boolean,\n            default: true\n        },\n        // 是否可拖拽(IE > 8)\n        draggable: {\n            type: Boolean,\n            default: false\n        },\n        // 拖动结束事件\n        onDragEnd: {\n            type: Function,\n            default: foo\n        },\n        onDragEnter: {\n            type: Function,\n            default: foo\n        },\n        onDragLeave: {\n            type: Function,\n            default: foo\n        },\n        onDragOver: {\n            type: Function,\n            default: foo\n        },\n        onDragStart: {\n            type: Function,\n            default: foo\n        },\n        onDrop: {\n            type: Function,\n            default: foo\n        },\n        onExpand: {\n            type: Function,\n            default: foo\n        },\n        // 自定义子组件\n        template: {\n            type: Function,\n            default: _defaultTemplate2.default\n        }\n    },\n    data: function data() {\n        this.dropNodeKey = '';\n        this.dragNodesKeys = '';\n\n        return {\n            dragOverNodeKey: '',\n            // 拖动时的位置\n            dropPosition: '',\n            // 展开的节点\n            expandedKeys: []\n        };\n    },\n\n    methods: {\n        /**\n         * 渲染单个子节点\n         * @param {VNode} child 要渲染的节点\n         * @param {Number} index 遍历时的 index\n         */\n        renderTreeNode: function renderTreeNode(child, index) {\n            var h = this.$createElement;\n\n            // 这里的值都是在 loop 时挂载到 VNode 上的\n            var _child$data = child.data,\n                vChildren = _child$data.vChildren,\n                rckey = _child$data.rckey,\n                level = _child$data.level,\n                title = _child$data.title,\n                source = _child$data.source;\n            // 给每个节点一个唯一值，同时也是表示位置\n\n            var pos = level + '-' + index;\n            var key = rckey;\n\n            // 根据这三个状态，来显示拖动时的交互\n            var dragOverGapTop = this.dragOverNodeKey === key && this.dropPosition === -1;\n            var dragOverGapBottom = this.dragOverNodeKey === key && this.dropPosition === 1;\n            var dragOver = this.dragOverNodeKey === key && this.dropPosition === 0;\n\n            // 展开状态\n            var expanded = this.expandedKeys.indexOf(key) !== -1;\n\n            return h(\n                _TreeNode2.default,\n                {\n                    attrs: {\n                        root: this,\n                        title: title,\n                        rckey: key,\n                        pos: pos,\n                        vChildren: vChildren,\n                        eventKey: key,\n                        dragOver: dragOver,\n                        dragOverGapTop: dragOverGapTop,\n                        dragOverGapBottom: dragOverGapBottom,\n                        source: source,\n                        template: this.template,\n                        draggable: this.draggable,\n                        expanded: expanded\n                    }\n                },\n                []\n            );\n        },\n\n        /**\n         * 获得当前正在拖拽的节点 key 集合（节点与其子节点\n         * @param {VueComponent} treeNode\n         */\n        getDragNodesKeys: function getDragNodesKeys(treeNode) {\n            var dragNodesKeys = [];\n            // 拿到位置信息\n            var treeNodePosArr = treeNode.pos.split('-');\n            /**\n             * item: child\n             */\n            (0, _utils.traverseTreeNodes)(treeNode.$children, function (item, index, pos, key) {\n                var childPosArr = pos.split('-');\n                if ((treeNode.pos === pos || treeNodePosArr.length < childPosArr.length) && (0, _utils.isInclude)(treeNodePosArr, childPosArr)) {\n                    // 正在拖拽的节点的“子孙节点”\n                    dragNodesKeys.push(key);\n                }\n            });\n            // 再将正在拖拽的节点 key 放进来\n            dragNodesKeys.push(treeNode.eventKey || treeNode.pos);\n            return dragNodesKeys;\n        },\n\n        /**\n         * 开始拖动\n         * @param {*} e\n         * @param {*} treeNode\n         */\n        dragStart: function dragStart(e, treeNode) {\n            this.dragNode = treeNode;\n            // 保存当前正在拖动的节点 key || pos\n            this.dragNodesKeys = this.getDragNodesKeys(treeNode);\n            // 再暴露出开始拖动的参数\n            this.onDragStart({\n                event: e,\n                node: treeNode\n            });\n        },\n\n        /**\n         * 拖动的元素“进入”某个节点时触发\n         * @param {Event} e\n         * @param {VueComponent} treeNode 实际进入的节点，所以是一直在变化的\n         */\n        dragEnter: function dragEnter(e, treeNode) {\n            // 获取到要放置的节点位置\n            var dropPosition = this.calcDropPosition(e, treeNode);\n            // 如果正在拖动的节点和鼠标所在的是同一个节点，就直接退出\n            if (this.dragNode.eventKey === treeNode.eventKey && dropPosition === 0) {\n                this.dragOverNodeKey = '';\n                this.dropPosition = null;\n                return;\n            }\n\n            this.dragOverNodeKey = treeNode.eventKey;\n            this.dropPosition = dropPosition;\n        },\n        dragOver: function dragOver(e, treeNode) {\n            this.onDragOver({ event: e, node: treeNode });\n        },\n        dragLeave: function dragLeave(e, treeNode) {\n            this.onDragLeave({ event: e, node: treeNode });\n        },\n\n        /**\n         * 拖动后放下\n         * @param {Event} e\n         * @param {VueComponent} treeNode 放下时鼠标所在的节点\n         */\n        drop: function drop(e, treeNode) {\n            var eventKey = treeNode.eventKey;\n\n            this.dragOverNodeKey = '';\n            this.dropNodeKey = eventKey;\n            // 如果是将一个节点放到它的子节点中\n            if (this.dragNodesKeys.indexOf(eventKey) > -1) {\n                console.error('Can not drop to dragNode(include it\\'s children node)');\n                return;\n            }\n\n            var posArr = treeNode.pos.split('-');\n            var res = {\n                event: e,\n                node: treeNode,\n                dragNode: this.dragNode,\n                dragNodesKeys: [].concat((0, _toConsumableArray3.default)(this.dragNodesKeys)),\n                dropPosition: this.dropPosition + Number(posArr[posArr.length - 1])\n            };\n            if (this.dropPosition !== 0) {\n                res.dropToGap = true;\n            }\n            this.onDrop(res);\n        },\n        dragEnd: function dragEnd(e, treeNode) {\n            this.dragOverNodeKey = '';\n            this.onDragEnd({ event: e, node: treeNode });\n        },\n\n        /**\n         * onDragEnter 时调用，计算\n         * @param {Event} e\n         * @param {VueComponent} treeNode 鼠标移动过程中进入的节点\n         * @return {Number}\n         */\n        calcDropPosition: function calcDropPosition(e, treeNode) {\n            var selectHandle = treeNode.$refs.selectHandle;\n            var offsetTop = (0, _utils.getOffset)(selectHandle).top;\n            var offsetHeight = selectHandle.offsetHeight;\n            var pageY = e.pageY;\n            // 敏感度\n            var gapHeight = 2; // TODO: remove hard code\n            // 如果是靠近下边缘，就返回 1\n            if (pageY > offsetTop + offsetHeight - gapHeight) {\n                return 1;\n            }\n            // 如果是靠近上边缘，就返回 -1\n            if (pageY < offsetTop + gapHeight) {\n                return -1;\n            }\n            // 否则就返回 0，表示在节点内部\n            return 0;\n        },\n\n        /**\n         *\n         * @param {VueComponent} treeNode 切换展开状态的节点\n         */\n        expand: function expand(treeNode) {\n            var expanded = !treeNode.expanded;\n            var expandedKeys = [].concat((0, _toConsumableArray3.default)(this.expandedKeys));\n            var eventKey = treeNode.eventKey;\n            var index = expandedKeys.indexOf(eventKey);\n            // 如果点击的节点要展开，但是不在表示已经展开的 expandKeys 数组中\n            if (expanded && index === -1) {\n                // 就加入该数组，在重新渲染的时候，就会展开了\n                expandedKeys.push(eventKey);\n            } else if (!expanded && index > -1) {\n                expandedKeys.splice(index, 1);\n            }\n            this.expandedKeys = expandedKeys;\n            this.onExpand(expandedKeys, { node: treeNode, expanded: expanded });\n        }\n    },\n    render: function render(h) {\n        var _this = this;\n\n        // 得到的 children 是 VNode\n        var vChildren = (0, _utils.loop)(this.data, h, _TreeNode2.default);\n        /**\n         * 1、一定是先渲染最顶层的节点\n         * 2、如果节点还有子节点，交给子节点自己处理\n         */\n        return h(\n            'ul',\n            {\n                'class': 'tree',\n                attrs: { role: 'tree-node',\n                    unselectable: 'on'\n                }\n            },\n            [vChildren.map(function (child, i) {\n                return _this.renderTreeNode(child, i);\n            })]\n        );\n    }\n});\n\n/***/ }),\n\n/***/ \"cWM3\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Tree = __webpack_require__(\"YwDL\");\n\nvar _Tree2 = _interopRequireDefault(_Tree);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Tree2.default;\n\n/***/ }),\n\n/***/ \"hgXd\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.traverseTreeNodes = traverseTreeNodes;\nexports.isInclude = isInclude;\nexports.getOffset = getOffset;\n/**\n * 生成 VNode 组成的数组\n * @param {*} data\n */\nvar loop = exports.loop = function loop(data, h, component) {\n    var level = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '0';\n    return data.map(function (item, i) {\n        var props = {\n            index: i,\n            rckey: item.key,\n            title: item.title,\n            level: level,\n            source: item\n        };\n        if (item.children && item.children.length) {\n            var newLevel = level + '-0';\n            props.vChildren = loop(item.children, h, component, newLevel);\n        }\n        return h(component, props, []);\n    });\n};\n\n/**\n *\n * @param {[VueComponent]} treeNodes\n * @param {Function} callback\n */\nfunction traverseTreeNodes() {\n    var treeNodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var callback = arguments[1];\n\n    var traverse = function traverse(subTreeNodes, level, parentsChildrenPos, parentPos) {\n        var newSubTreeNodes = subTreeNodes;\n        if (subTreeNodes && subTreeNodes.length) {\n            newSubTreeNodes = subTreeNodes.filter(function (item) {\n                return !!item;\n            });\n        }\n\n        // 真正开始遍历传进来的 VueComponents\n        newSubTreeNodes.forEach(function (item, index) {\n            if (!item.isTreeNode) {\n                return;\n            }\n            // const pos = `${level}-${index}`;\n            var pos = item.pos;\n            parentsChildrenPos.push(pos); // Note: side effect\n\n            var childrenPos = [];\n            // if (item.$children && item.type && item.type.isTreeNode) {\n            if (item.$children) {\n                traverse(item.$children, pos, childrenPos, pos);\n            }\n            callback(item, index, pos, item.rckey || pos, childrenPos, parentPos);\n        });\n    };\n    // call traverse\n    traverse(treeNodes, 0, []);\n}\nfunction isInclude(smallArray, bigArray) {\n    return smallArray.every(function (item, index) {\n        return item === bigArray[index];\n    });\n}\n\n/**\n * 获取位置信息\n * @param {*} ele\n */\nfunction getOffset(ele) {\n    if (!ele.getClientRects().length) {\n        return { top: 0, left: 0 };\n    }\n\n    var rect = ele.getBoundingClientRect();\n    if (rect.width || rect.height) {\n        var doc = ele.ownerDocument;\n        var win = doc.defaultView;\n        var docElem = doc.documentElement;\n\n        return {\n            top: rect.top + win.pageYOffset - docElem.clientTop,\n            left: rect.left + win.pageXOffset - docElem.clientLeft\n        };\n    }\n\n    return rect;\n}\n\n/***/ }),\n\n/***/ \"hwOU\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof2 = __webpack_require__(\"pFYg\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _classnames = __webpack_require__(\"HW6M\");\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultTitle = '---';\nvar defaultPrefixCls = 'rc';\n\nvar TreeNode = _vue2.default.component('TreeNode', {\n    props: {\n        prefixCls: {\n            type: String,\n            default: function _default() {\n                return defaultPrefixCls;\n            }\n        },\n        source: {\n            type: Object\n        },\n        title: {\n            type: String,\n            default: function _default() {\n                return defaultTitle;\n            }\n        },\n        rckey: {},\n        pos: {\n            type: String\n        },\n        // 父节点\n        root: {\n            type: Object\n        },\n        vChildren: {\n            type: Array\n        },\n        eventKey: {},\n        draggable: {\n            type: Boolean,\n            default: false\n        },\n        dragOver: {},\n        dragOverGapTop: {\n            type: Boolean\n        },\n        dragOverGapBottom: {\n            type: Boolean\n        },\n        template: {},\n        // 展开收起状态\n        expanded: {\n            type: Boolean\n        }\n    },\n    data: function data() {\n        this.isTreeNode = true;\n        return {\n            dataLoading: false,\n            dragNodeHighlight: false\n        };\n    },\n\n    computed: {\n        // 将正在拖拽的节点暴露在 this 上\n        handleSelect: function handleSelect() {\n            return this.$refs.handleSelect;\n        }\n    },\n    methods: {\n        /**\n         * 渲染子节点\n         */\n        renderChildren: function renderChildren() {\n            var _this = this;\n\n            var h = this.$createElement;\n            var expanded = this.expanded;\n\n            var newchildren = null;\n            var vChildren = this.vChildren;\n            if (vChildren && !expanded) {\n                newchildren = h(\n                    'ul',\n                    null,\n                    [vChildren.map(function (vnode, i) {\n                        return _this.root.renderTreeNode(vnode, i);\n                    })]\n                );\n            }\n            return newchildren;\n        },\n        onSelect: function onSelect() {\n            this.root.onSelect(this);\n        },\n        onDragStart: function onDragStart(e) {\n            e.stopPropagation();\n            this.dragNodeHighlight = true;\n            this.root.dragStart(e, this);\n            try {\n                // ie throw error\n                // firefox-need-it\n                e.dataTransfer.setData('text/plain', '');\n            } catch (error) {\n                // empty\n            }\n        },\n        onDragEnter: function onDragEnter(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.root.dragEnter(e, this);\n        },\n        onDragOver: function onDragOver(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.root.dragOver(e, this);\n        },\n        onDragLeave: function onDragLeave(e) {\n            e.stopPropagation();\n            this.root.dragLeave(e, this);\n        },\n        onDrop: function onDrop(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dragNodeHighlight = false;\n            this.root.drop(e, this);\n        },\n        onDragEnd: function onDragEnd(e) {\n            e.stopPropagation();\n            this.dragNodeHighlight = false;\n            this.root.dragEnd(e, this);\n        },\n        onExpand: function onExpand() {\n            var _this2 = this;\n\n            var callbackPromise = this.root.expand(this);\n            if (callbackPromise && (typeof callbackPromise === 'undefined' ? 'undefined' : (0, _typeof3.default)(callbackPromise)) === 'object') {\n                var setLoading = function setLoading(dataLoading) {\n                    _this2.dataLoading = dataLoading;\n                };\n                setLoading(true);\n                callbackPromise.then(function () {\n                    setLoading(false);\n                }, function () {\n                    setLoading(false);\n                });\n            }\n        },\n        switcher: function switcher() {\n            var h = this.$createElement;\n\n            // const { prefixCls } = this;\n            var state = '';\n            if (this.source.children && this.source.children.length > 0) {\n                // 如果是开的\n                if (this.expanded) {\n                    state = '+';\n                } else {\n                    state = '-';\n                }\n            }\n            return h(\n                'span',\n                {\n                    on: {\n                        'click': this.onExpand\n                    }\n                },\n                [state]\n            );\n        }\n    },\n    render: function render(h) {\n        var _this3 = this;\n\n        // 渲染可拖拽部分，标题\n        var selectHandle = function selectHandle() {\n            var prefixCls = _this3.prefixCls;\n\n            var content = _this3.title;\n            var title = h(\n                'span',\n                { 'class': prefixCls + '-title' },\n                [content]\n            );\n\n            var Component = _this3.template;\n\n            return h('span', {\n                ref: 'selectHandle',\n                attrs: {\n                    class: 'title-wrapper draggable',\n                    style: 'height: 17px; font-size: 14px; padding-top: 2px; vertical-align: top;',\n                    draggable: _this3.draggable\n                },\n                on: {\n                    dragstart: _this3.onDragStart,\n                    dragenter: _this3.onDragEnter,\n                    dragover: _this3.onDragOver,\n                    drop: _this3.onDrop,\n                    dragend: _this3.onDragEnd\n                }\n            }, [h(Component, {\n                attrs: {},\n                props: {\n                    title: title,\n                    node: _this3.source\n                }\n            }, [])]);\n        };\n        // 当前位置\n        // const { prefixCls } = this;\n        // let disabledCls = '';\n        var dragOverCls = '';\n        if (this.disabled) {\n            //   disabledCls = `${prefixCls}-treenode-disabled`;\n        } else if (this.dragOver) {\n            dragOverCls = 'drag-over';\n        } else if (this.dragOverGapTop) {\n            dragOverCls = 'drag-over-gap-top';\n        } else if (this.dragOverGapBottom) {\n            dragOverCls = 'drag-over-gap-bottom';\n        }\n\n        return h('li', {\n            class: (0, _classnames2.default)(dragOverCls)\n        }, [this.switcher(), selectHandle(), this.renderChildren()]);\n    }\n});\n\nexports.default = TreeNode;\n\n/***/ }),\n\n/***/ \"ioV9\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _vue = __webpack_require__(\"7+uW\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _vue2.default.component('DEFAULT_TEMPLATE', {\n    props: {\n        title: {},\n        node: {\n            type: Object\n        }\n    },\n    render: function render() {\n        var h = arguments[0];\n\n        return h(\n            'div',\n            null,\n            [h(\n                'span',\n                null,\n                [this.title]\n            )]\n        );\n    }\n});\n\n/***/ }),\n\n/***/ \"kvWO\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"},[_c('Tree',{attrs:{\"draggable\":true,\"data\":_vm.gData,\"onDrop\":_vm.onDrop}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"lf0G\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Index')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"rUkx\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"upaz\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"w0q8\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"xJD8\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Index = __webpack_require__(\"42Hy\");\n\nvar _Index2 = _interopRequireDefault(_Index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  name: 'app',\n  components: {\n    Index: _Index2.default\n  }\n}; //\n//\n//\n//\n//\n//\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.c8aa288cf90aeba7acd9.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41135bf0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41135bf0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-41135bf0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Index.vue\n// module id = 42Hy\n// module chunks = 1","<template>\n    <div class=\"hello\">\n        <Tree\n            :draggable=\"true\"\n            :data=\"gData\"\n            :onDrop=\"onDrop\"\n        ></Tree>\n    </div>\n</template>\n\n<script>\nimport Tree from '../tree';\n\nconst EXAMPLE_DATA = [\n    {\n        key: '0',\n        title: '女装',\n        children: [\n            {\n                key: '0-1',\n                title: '风衣',\n            },\n            {\n                key: '0-2',\n                title: '外套',\n            },\n        ],\n    },\n    {\n        key: '1',\n        title: '男装',\n    },\n    {\n        key: '2',\n        title: '图书',\n        children: [\n            {\n                key: '2-0',\n                title: '小说',\n                children: [\n                    {\n                        key: '2-0-0',\n                        title: '九州牧云录',\n                    },\n                    {\n                        key: '2-0-1',\n                        title: '天空的城',\n                    },\n                    {\n                        key: '2-0-2',\n                        title: '三体',\n                    },\n                ],\n            },\n            {\n                key: '2-1',\n                title: '经管',\n                children: [\n                    {\n                        key: '2-1-0',\n                        title: '创京东',\n                    },\n                ],\n            },\n            {\n                key: '2-2',\n                title: '科技',\n                children: [\n                    {\n                        key: '2-2-0',\n                        title: 'JavaScript权威指南',\n                    },\n                    {\n                        key: '2-2-1',\n                        title: 'JavaScript高级程序设计',\n                    },\n                ],\n            },\n        ],\n    },\n];\n\nexport default {\n    name: 'vue-draggable-tree-demo',\n    components: {\n        Tree,\n    },\n    data() {\n        return {\n            gData: EXAMPLE_DATA,\n        };\n    },\n    methods: {\n        /**\n         * 结束拖拽后此时的信息，包括目标节点、拖拽节点、位置\n         */\n        onDrop(info) {\n            // 目标节点\n            const dropKey = info.node.eventKey;\n            // 正在拖拽的节点\n            const dragKey = info.dragNode.eventKey;\n            const dropPos = info.node.pos.split('-');\n            const dropPosition =\n                info.dropPosition - Number(dropPos[dropPos.length - 1]);\n            // const dragNodesKeys = info.dragNodesKeys;\n            /**\n             * 遍历 data，节点对应的对象\n             * @param {} data\n             * @param {} key\n             * @param {Function} callback\n             */\n            const loop = (data, key, callback) => {\n                data.forEach((item, index, arr) => {\n                    if (item.key === key) {\n                        return callback(item, index, arr);\n                    }\n                    if (item.children) {\n                        return loop(item.children, key, callback);\n                    }\n                    return false;\n                });\n            };\n            // 浅拷贝\n            const data = [...this.gData];\n            let dragObj;\n            loop(data, dragKey, (item, index, arr) => {\n                // 找到后，删掉该节点\n                arr.splice(index, 1);\n                dragObj = item;\n            });\n            // 然后处理应该放到哪里\n            if (info.dropToGap) {\n                // 如果是在两个节点之间\n                let ar;\n                let i;\n                // 寻找放置的那个节点对应的数组，保存为 ar\n                loop(data, dropKey, (item, index, arr) => {\n                    ar = arr;\n                    i = index;\n                });\n                // 如果是放到下边缘\n                if (dropPosition === 1) {\n                    ar.splice(i + 1, 0, dragObj);\n                } else {\n                    ar.splice(i, 0, dragObj);\n                }\n            } else {\n                // 成为子节点\n                loop(data, dropKey, (item) => {\n                    /* eslint-disable */\n                    item.children = item.children || [];\n                    // where to insert 示例添加到尾部，可以是随意位置\n                    item.children.push(dragObj);\n                });\n            }\n            // 改变数据，让 vue 自己去更新视图\n            this.gData = data;\n        },\n    },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Index.vue","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-380a485a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-380a485a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport App from './App';\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Vue from 'vue';\nimport TreeNode from './TreeNode';\nimport DefaultTemplate from './defaultTemplate';\n\nimport {\n    loop,\n    traverseTreeNodes,\n    isInclude,\n    getOffset,\n} from './utils';\n\nimport './style.css';\n\nfunction foo() {}\n\nexport default Vue.component('Tree', {\n    props: {\n        // 要渲染的数据\n        data: {\n            type: Array,\n        },\n        // 是否自动展开节点\n        autoExpandParent: {\n            type: Boolean,\n            default: true,\n        },\n        // 是否可拖拽(IE > 8)\n        draggable: {\n            type: Boolean,\n            default: false,\n        },\n        // 拖动结束事件\n        onDragEnd: {\n            type: Function,\n            default: foo,\n        },\n        onDragEnter: {\n            type: Function,\n            default: foo,\n        },\n        onDragLeave: {\n            type: Function,\n            default: foo,\n        },\n        onDragOver: {\n            type: Function,\n            default: foo,\n        },\n        onDragStart: {\n            type: Function,\n            default: foo,\n        },\n        onDrop: {\n            type: Function,\n            default: foo,\n        },\n        onExpand: {\n            type: Function,\n            default: foo,\n        },\n        // 自定义子组件\n        template: {\n            type: Function,\n            default: DefaultTemplate,\n        },\n    },\n    data() {\n        this.dropNodeKey = '';\n        this.dragNodesKeys = '';\n\n        return {\n            dragOverNodeKey: '',\n            // 拖动时的位置\n            dropPosition: '',\n            // 展开的节点\n            expandedKeys: [],\n        };\n    },\n    methods: {\n        /**\n         * 渲染单个子节点\n         * @param {VNode} child 要渲染的节点\n         * @param {Number} index 遍历时的 index\n         */\n        renderTreeNode(child, index) {\n            // 这里的值都是在 loop 时挂载到 VNode 上的\n            const {\n                vChildren,\n                rckey,\n                level,\n                title,\n                source,\n            } = child.data;\n            // 给每个节点一个唯一值，同时也是表示位置\n            const pos = `${level}-${index}`;\n            const key = rckey;\n\n            // 根据这三个状态，来显示拖动时的交互\n            const dragOverGapTop = this.dragOverNodeKey === key && this.dropPosition === -1;\n            const dragOverGapBottom = this.dragOverNodeKey === key && this.dropPosition === 1;\n            const dragOver = this.dragOverNodeKey === key && this.dropPosition === 0;\n\n            // 展开状态\n            const expanded = this.expandedKeys.indexOf(key) !== -1;\n\n            return (<TreeNode\n                root={this}\n                title={title}\n                rckey={key}\n                pos={pos}\n                vChildren={vChildren}\n                eventKey={key}\n                dragOver={dragOver}\n                dragOverGapTop={dragOverGapTop}\n                dragOverGapBottom={dragOverGapBottom}\n                source={source}\n                template={this.template}\n                draggable={this.draggable}\n                expanded={expanded}\n            />);\n        },\n        /**\n         * 获得当前正在拖拽的节点 key 集合（节点与其子节点\n         * @param {VueComponent} treeNode\n         */\n        getDragNodesKeys(treeNode) {\n            const dragNodesKeys = [];\n            // 拿到位置信息\n            const treeNodePosArr = treeNode.pos.split('-');\n            /**\n             * item: child\n             */\n            traverseTreeNodes(treeNode.$children, (item, index, pos, key) => {\n                const childPosArr = pos.split('-');\n                if (\n                    (treeNode.pos === pos ||\n                    treeNodePosArr.length < childPosArr.length) &&\n                    isInclude(treeNodePosArr, childPosArr)\n                ) {\n                    // 正在拖拽的节点的“子孙节点”\n                    dragNodesKeys.push(key);\n                }\n            });\n            // 再将正在拖拽的节点 key 放进来\n            dragNodesKeys.push(treeNode.eventKey || treeNode.pos);\n            return dragNodesKeys;\n        },\n        /**\n         * 开始拖动\n         * @param {*} e\n         * @param {*} treeNode\n         */\n        dragStart(e, treeNode) {\n            this.dragNode = treeNode;\n            // 保存当前正在拖动的节点 key || pos\n            this.dragNodesKeys = this.getDragNodesKeys(treeNode);\n            // 再暴露出开始拖动的参数\n            this.onDragStart({\n                event: e,\n                node: treeNode,\n            });\n        },\n        /**\n         * 拖动的元素“进入”某个节点时触发\n         * @param {Event} e\n         * @param {VueComponent} treeNode 实际进入的节点，所以是一直在变化的\n         */\n        dragEnter(e, treeNode) {\n            // 获取到要放置的节点位置\n            const dropPosition = this.calcDropPosition(e, treeNode);\n            // 如果正在拖动的节点和鼠标所在的是同一个节点，就直接退出\n            if (\n                this.dragNode.eventKey === treeNode.eventKey &&\n                dropPosition === 0\n            ) {\n                this.dragOverNodeKey = '';\n                this.dropPosition = null;\n                return;\n            }\n\n            this.dragOverNodeKey = treeNode.eventKey;\n            this.dropPosition = dropPosition;\n        },\n        dragOver(e, treeNode) {\n            this.onDragOver({ event: e, node: treeNode });\n        },\n        dragLeave(e, treeNode) {\n            this.onDragLeave({ event: e, node: treeNode });\n        },\n        /**\n         * 拖动后放下\n         * @param {Event} e\n         * @param {VueComponent} treeNode 放下时鼠标所在的节点\n         */\n        drop(e, treeNode) {\n            const eventKey = treeNode.eventKey;\n\n            this.dragOverNodeKey = '';\n            this.dropNodeKey = eventKey;\n            // 如果是将一个节点放到它的子节点中\n            if (this.dragNodesKeys.indexOf(eventKey) > -1) {\n                console.error('Can not drop to dragNode(include it\\'s children node)');\n                return;\n            }\n\n            const posArr = treeNode.pos.split('-');\n            const res = {\n                event: e,\n                node: treeNode,\n                dragNode: this.dragNode,\n                dragNodesKeys: [...this.dragNodesKeys],\n                dropPosition: this.dropPosition + Number(posArr[posArr.length - 1]),\n            };\n            if (this.dropPosition !== 0) {\n                res.dropToGap = true;\n            }\n            this.onDrop(res);\n        },\n        dragEnd(e, treeNode) {\n            this.dragOverNodeKey = '';\n            this.onDragEnd({ event: e, node: treeNode });\n        },\n        /**\n         * onDragEnter 时调用，计算\n         * @param {Event} e\n         * @param {VueComponent} treeNode 鼠标移动过程中进入的节点\n         * @return {Number}\n         */\n        calcDropPosition(e, treeNode) {\n            const selectHandle = treeNode.$refs.selectHandle;\n            const offsetTop = getOffset(selectHandle).top;\n            const offsetHeight = selectHandle.offsetHeight;\n            const pageY = e.pageY;\n            // 敏感度\n            const gapHeight = 2; // TODO: remove hard code\n            // 如果是靠近下边缘，就返回 1\n            if (pageY > (offsetTop + offsetHeight) - gapHeight) {\n                return 1;\n            }\n            // 如果是靠近上边缘，就返回 -1\n            if (pageY < offsetTop + gapHeight) {\n                return -1;\n            }\n            // 否则就返回 0，表示在节点内部\n            return 0;\n        },\n        /**\n         *\n         * @param {VueComponent} treeNode 切换展开状态的节点\n         */\n        expand(treeNode) {\n            const expanded = !treeNode.expanded;\n            const expandedKeys = [...this.expandedKeys];\n            const eventKey = treeNode.eventKey;\n            const index = expandedKeys.indexOf(eventKey);\n            // 如果点击的节点要展开，但是不在表示已经展开的 expandKeys 数组中\n            if (expanded && index === -1) {\n                // 就加入该数组，在重新渲染的时候，就会展开了\n                expandedKeys.push(eventKey);\n            } else if (!expanded && index > -1) {\n                expandedKeys.splice(index, 1);\n            }\n            this.expandedKeys = expandedKeys;\n            this.onExpand(expandedKeys, { node: treeNode, expanded });\n        },\n    },\n    render(h) {\n        // 得到的 children 是 VNode\n        const vChildren = loop(this.data, h, TreeNode);\n        /**\n         * 1、一定是先渲染最顶层的节点\n         * 2、如果节点还有子节点，交给子节点自己处理\n         */\n        return (<ul\n            class=\"tree\"\n            role=\"tree-node\"\n            unselectable=\"on\"\n        >\n            {vChildren.map((child, i) => this.renderTreeNode(child, i))}\n        </ul>);\n    },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tree/Tree.js","import Tree from './Tree';\n\nexport default Tree;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tree/index.js","/**\n * 生成 VNode 组成的数组\n * @param {*} data\n */\nexport const loop = (data, h, component, level = '0') =>\n    data.map((item, i) => {\n        const props = {\n            index: i,\n            rckey: item.key,\n            title: item.title,\n            level,\n            source: item,\n        };\n        if (item.children && item.children.length) {\n            const newLevel = `${level}-0`;\n            props.vChildren = loop(item.children, h, component, newLevel);\n        }\n        return h(component, props, []);\n    });\n\n/**\n *\n * @param {[VueComponent]} treeNodes\n * @param {Function} callback\n */\nexport function traverseTreeNodes(treeNodes = [], callback) {\n    const traverse = (subTreeNodes, level, parentsChildrenPos, parentPos) => {\n        let newSubTreeNodes = subTreeNodes;\n        if (subTreeNodes && subTreeNodes.length) {\n            newSubTreeNodes = subTreeNodes.filter(item => !!item);\n        }\n\n        // 真正开始遍历传进来的 VueComponents\n        newSubTreeNodes.forEach((item, index) => {\n            if (!item.isTreeNode) {\n                return;\n            }\n            // const pos = `${level}-${index}`;\n            const pos = item.pos;\n            parentsChildrenPos.push(pos); // Note: side effect\n\n            const childrenPos = [];\n            // if (item.$children && item.type && item.type.isTreeNode) {\n            if (item.$children) {\n                traverse(item.$children, pos, childrenPos, pos);\n            }\n            callback(\n                item,\n                index,\n                pos,\n                item.rckey || pos,\n                childrenPos,\n                parentPos,\n            );\n        });\n    };\n    // call traverse\n    traverse(treeNodes, 0, []);\n}\nexport function isInclude(smallArray, bigArray) {\n    return smallArray.every((item, index) => item === bigArray[index]);\n}\n\n/**\n * 获取位置信息\n * @param {*} ele\n */\nexport function getOffset(ele) {\n    if (!ele.getClientRects().length) {\n        return { top: 0, left: 0 };\n    }\n\n    const rect = ele.getBoundingClientRect();\n    if (rect.width || rect.height) {\n        const doc = ele.ownerDocument;\n        const win = doc.defaultView;\n        const docElem = doc.documentElement;\n\n        return {\n            top: (rect.top + win.pageYOffset) - docElem.clientTop,\n            left: (rect.left + win.pageXOffset) - docElem.clientLeft,\n        };\n    }\n\n    return rect;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/tree/utils.js","import Vue from 'vue';\nimport classNames from 'classnames';\n\nconst defaultTitle = '---';\nconst defaultPrefixCls = 'rc';\n\nconst TreeNode = Vue.component('TreeNode', {\n    props: {\n        prefixCls: {\n            type: String,\n            default() {\n                return defaultPrefixCls;\n            },\n        },\n        source: {\n            type: Object,\n        },\n        title: {\n            type: String,\n            default() {\n                return defaultTitle;\n            },\n        },\n        rckey: {\n        },\n        pos: {\n            type: String,\n        },\n        // 父节点\n        root: {\n            type: Object,\n        },\n        vChildren: {\n            type: Array,\n        },\n        eventKey: {\n        },\n        draggable: {\n            type: Boolean,\n            default: false,\n        },\n        dragOver: {},\n        dragOverGapTop: {\n            type: Boolean,\n        },\n        dragOverGapBottom: {\n            type: Boolean,\n        },\n        template: {},\n        // 展开收起状态\n        expanded: {\n            type: Boolean,\n        },\n    },\n    data() {\n        this.isTreeNode = true;\n        return {\n            dataLoading: false,\n            dragNodeHighlight: false,\n        };\n    },\n    computed: {\n        // 将正在拖拽的节点暴露在 this 上\n        handleSelect() {\n            return this.$refs.handleSelect;\n        },\n    },\n    methods: {\n        /**\n         * 渲染子节点\n         */\n        renderChildren() {\n            const { expanded } = this;\n            let newchildren = null;\n            const vChildren = this.vChildren;\n            if (vChildren && !expanded) {\n                newchildren = <ul>\n                    {vChildren.map((vnode, i) =>\n                        this.root.renderTreeNode(vnode, i),\n                    )}\n                </ul>;\n            }\n            return newchildren;\n        },\n        onSelect() {\n            this.root.onSelect(this);\n        },\n        onDragStart(e) {\n            e.stopPropagation();\n            this.dragNodeHighlight = true;\n            this.root.dragStart(e, this);\n            try {\n                // ie throw error\n                // firefox-need-it\n                e.dataTransfer.setData('text/plain', '');\n            } catch (error) {\n                // empty\n            }\n        },\n        onDragEnter(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.root.dragEnter(e, this);\n        },\n        onDragOver(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.root.dragOver(e, this);\n        },\n        onDragLeave(e) {\n            e.stopPropagation();\n            this.root.dragLeave(e, this);\n        },\n        onDrop(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dragNodeHighlight = false;\n            this.root.drop(e, this);\n        },\n        onDragEnd(e) {\n            e.stopPropagation();\n            this.dragNodeHighlight = false;\n            this.root.dragEnd(e, this);\n        },\n        onExpand() {\n            const callbackPromise = this.root.expand(this);\n            if (callbackPromise && typeof callbackPromise === 'object') {\n                const setLoading = (dataLoading) => {\n                    this.dataLoading = dataLoading;\n                };\n                setLoading(true);\n                callbackPromise.then(() => {\n                    setLoading(false);\n                }, () => {\n                    setLoading(false);\n                });\n            }\n        },\n        switcher() {\n            // const { prefixCls } = this;\n            let state = '';\n            if (this.source.children && this.source.children.length > 0) {\n                // 如果是开的\n                if (this.expanded) {\n                    state = '+';\n                } else {\n                    state = '-';\n                }\n            }\n            return <span onClick={this.onExpand}>{state}</span>;\n        },\n    },\n    render(h) {\n        // 渲染可拖拽部分，标题\n        const selectHandle = () => {\n            const { prefixCls } = this;\n            const content = this.title;\n            const title = <span class={`${prefixCls}-title`}>{content}</span>;\n\n            const Component = this.template;\n\n            return h('span', {\n                ref: 'selectHandle',\n                attrs: {\n                    class: 'title-wrapper draggable',\n                    style: 'height: 17px; font-size: 14px; padding-top: 2px; vertical-align: top;',\n                    draggable: this.draggable,\n                },\n                on: {\n                    dragstart: this.onDragStart,\n                    dragenter: this.onDragEnter,\n                    dragover: this.onDragOver,\n                    drop: this.onDrop,\n                    dragend: this.onDragEnd,\n                },\n            }, [h(Component, {\n                attrs: {\n                },\n                props: {\n                    title,\n                    node: this.source,\n                },\n            }, [])]);\n        };\n        // 当前位置\n        // const { prefixCls } = this;\n        // let disabledCls = '';\n        let dragOverCls = '';\n        if (this.disabled) {\n            //   disabledCls = `${prefixCls}-treenode-disabled`;\n        } else if (this.dragOver) {\n            dragOverCls = 'drag-over';\n        } else if (this.dragOverGapTop) {\n            dragOverCls = 'drag-over-gap-top';\n        } else if (this.dragOverGapBottom) {\n            dragOverCls = 'drag-over-gap-bottom';\n        }\n\n        return h('li', {\n            class: classNames(dragOverCls),\n        }, [this.switcher(), selectHandle(), this.renderChildren()]);\n    },\n});\n\nexport default TreeNode;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tree/TreeNode.js","import Vue from 'vue';\n\nexport default Vue.component('DEFAULT_TEMPLATE', {\n    props: {\n        title: {\n        },\n        node: {\n            type: Object,\n        },\n    },\n    render() {\n        return (<div><span>{this.title}</span></div>);\n    },\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/tree/defaultTemplate.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"},[_c('Tree',{attrs:{\"draggable\":true,\"data\":_vm.gData,\"onDrop\":_vm.onDrop}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41135bf0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Index.vue\n// module id = kvWO\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Index')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-380a485a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = lf0G\n// module chunks = 1","<template>\n  <div id=\"app\">\n      <Index />\n  </div>\n</template>\n\n<script>\nimport Index from './components/Index';\n\nexport default {\n  name: 'app',\n  components: {\n      Index,\n  },\n};\n</script>\n\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue"],"sourceRoot":""}